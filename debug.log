
> ai-chatbot@3.1.0 dev /Users/kalam/Codespace/omnizen-app
> lsof -ti:3333 | xargs kill -9 2>/dev/null; next dev --turbo --port 3333

   â–² Next.js 15.3.0-canary.31 (Turbopack)
   - Local:        http://localhost:3333
   - Network:      http://192.168.0.112:3333
   - Environments: .env.local
   - Experiments (use with caution):
     âœ“ ppr

 âœ“ Starting...
 âœ“ Compiled in 411ms
Langfuse tracing initialized
 âœ“ Ready in 1026ms
Langfuse tracing initialized
 â—‹ Compiling / ...
 âœ“ Compiled / in 4.6s
 GET / 200 in 5602ms
 â—‹ Compiling /api/history ...
 âœ“ Compiled /api/history in 767ms
 GET /api/history?limit=20 200 in 819ms
 GET /api/auth/session 200 in 1121ms
 GET /api/auth/session 200 in 31ms
 âœ“ Compiled /api/chat in 482ms
[Database Tools] User context: {
  userId: '7c08fc98-a801-407a-98fc-f24b7e352bfb',
  orgId: '11111111-1111-1111-1111-111111111111',
  workspaceId: undefined,
  role: 'user'
}
[Database Tools] Loaded 5 tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Database Tools] Tools object: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[QueryMemory] Connected to Redis
[QueryMemory] Injected 2 examples into prompt
[Prompt Analysis]
- Characters: 6493
- Estimated tokens: 1623
- Cost (DeepSeek): $0.000227
- Sections: Full Schema, Invoice Context
[DeepSeek Detailed] Type: business, Tokens: 1813 (complete schema for accuracy)
[Model Selection] Using model: deepseek-chat
[Tools Registration] Available tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Tools Registration] Tool names for activeTools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
 âœ“ Compiled /api/vote in 303ms
 GET /api/vote?chatId=5e30069f-717b-4bd3-bf29-886c211db5d2 200 in 330ms
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '129',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_uQadfUTH8eAPeTCyaYXpwHHr' } ]
[QueryMemory Debug] toolCall structure: {
  toolName: 'dbRead',
  hasArgs: false,
  argsType: 'undefined',
  argsKeys: 'undefined',
  toolCallKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata'
  ]
}
[QueryMemory] Cannot store - missing data: {
  hasSuccess: false,
  hasQuery: false,
  resultKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata',
    'output'
  ]
}
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'schemaInfo', id: 'call_00_vJjaGAaGdlF6J5mtb7q1ZDR6' } ]
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '129',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_jneLoSje7eIW5Mwvl0WLa94q' } ]
[QueryMemory Debug] toolCall structure: {
  toolName: 'dbRead',
  hasArgs: false,
  argsType: 'undefined',
  argsKeys: 'undefined',
  toolCallKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata'
  ]
}
[QueryMemory] Cannot store - missing data: {
  hasSuccess: false,
  hasQuery: false,
  resultKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata',
    'output'
  ]
}
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '35',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_wcsHCL3qD8SaE5s15upLzcFn' } ]
[QueryMemory Debug] toolCall structure: {
  toolName: 'dbRead',
  hasArgs: false,
  argsType: 'undefined',
  argsKeys: 'undefined',
  toolCallKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata'
  ]
}
[QueryMemory] Cannot store - missing data: {
  hasSuccess: false,
  hasQuery: false,
  resultKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata',
    'output'
  ]
}
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "LIMIT"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '30',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_C6FrexDm7ueJYI5CwQxyMWP3' } ]
[QueryMemory Debug] toolCall structure: {
  toolName: 'dbRead',
  hasArgs: false,
  argsType: 'undefined',
  argsKeys: 'undefined',
  toolCallKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata'
  ]
}
[QueryMemory] Cannot store - missing data: {
  hasSuccess: false,
  hasQuery: false,
  resultKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata',
    'output'
  ]
}
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'viewsList', id: 'call_00_ukPuS86MTBpU9iCZNQEorxnV' } ]
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: relation "v_profit_loss_statement" does not exist] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42P01',
  position: '15',
  file: 'parse_relation.c',
  line: '1449',
  routine: 'parserOpenTable'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_YA6773EjF44D1OKCMIA8mbEU' } ]
[QueryMemory Debug] toolCall structure: {
  toolName: 'dbRead',
  hasArgs: false,
  argsType: 'undefined',
  argsKeys: 'undefined',
  toolCallKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata'
  ]
}
[QueryMemory] Cannot store - missing data: {
  hasSuccess: false,
  hasQuery: false,
  resultKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata',
    'output'
  ]
}
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_XIFp11YehTzgxGj6EyucYw7t' } ]
[QueryMemory Debug] toolCall structure: {
  toolName: 'dbRead',
  hasArgs: false,
  argsType: 'undefined',
  argsKeys: 'undefined',
  toolCallKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata'
  ]
}
[QueryMemory] Cannot store - missing data: {
  hasSuccess: false,
  hasQuery: false,
  resultKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata',
    'output'
  ]
}
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "LIMIT"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '30',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_ppxA6fKnmsB7IGvq6sPHdQUn' } ]
[QueryMemory Debug] toolCall structure: {
  toolName: 'dbRead',
  hasArgs: false,
  argsType: 'undefined',
  argsKeys: 'undefined',
  toolCallKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata'
  ]
}
[QueryMemory] Cannot store - missing data: {
  hasSuccess: false,
  hasQuery: false,
  resultKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata',
    'output'
  ]
}
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_ejgRmkqNQJBWuJ85RcfIYu92' } ]
[QueryMemory Debug] toolCall structure: {
  toolName: 'dbRead',
  hasArgs: false,
  argsType: 'undefined',
  argsKeys: 'undefined',
  toolCallKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata'
  ]
}
[QueryMemory] Cannot store - missing data: {
  hasSuccess: false,
  hasQuery: false,
  resultKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata',
    'output'
  ]
}
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '129',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_7bBAOkGh7gvtH8cDhszKJ6N4' } ]
[QueryMemory Debug] toolCall structure: {
  toolName: 'dbRead',
  hasArgs: false,
  argsType: 'undefined',
  argsKeys: 'undefined',
  toolCallKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata'
  ]
}
[QueryMemory] Cannot store - missing data: {
  hasSuccess: false,
  hasQuery: false,
  resultKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata',
    'output'
  ]
}
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '44',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_lmkXrgQgOssNhoz9FZTmA23A' } ]
[QueryMemory Debug] toolCall structure: {
  toolName: 'dbRead',
  hasArgs: false,
  argsType: 'undefined',
  argsKeys: 'undefined',
  toolCallKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata'
  ]
}
[QueryMemory] Cannot store - missing data: {
  hasSuccess: false,
  hasQuery: false,
  resultKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata',
    'output'
  ]
}
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_dyfoTjjho1GTQHh7Lsi7SIrE' } ]
[QueryMemory Debug] toolCall structure: {
  toolName: 'dbRead',
  hasArgs: false,
  argsType: 'undefined',
  argsKeys: 'undefined',
  toolCallKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata'
  ]
}
[QueryMemory] Cannot store - missing data: {
  hasSuccess: false,
  hasQuery: false,
  resultKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata',
    'output'
  ]
}
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_MwUdHaSmAmbwY4zNAijhUotb' } ]
[QueryMemory Debug] toolCall structure: {
  toolName: 'dbRead',
  hasArgs: false,
  argsType: 'undefined',
  argsKeys: 'undefined',
  toolCallKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata'
  ]
}
[QueryMemory] Cannot store - missing data: {
  hasSuccess: false,
  hasQuery: false,
  resultKeys: [
    'type',
    'toolCallId',
    'toolName',
    'input',
    'providerExecuted',
    'providerMetadata',
    'output'
  ]
}
[Step] Tool results received: 1
[DeepSeek] Intermediate step text: "Based on the database query results, I can provide you with the total revenue information:

**Total ..."
 POST /api/chat 200 in 106424ms
 GET /api/history?limit=20 200 in 43ms

> ai-chatbot@3.1.0 dev /Users/kalam/Codespace/omnizen-app
> lsof -ti:3333 | xargs kill -9 2>/dev/null; next dev --turbo --port 3333

   â–² Next.js 15.3.0-canary.31 (Turbopack)
   - Local:        http://localhost:3333
   - Network:      http://192.168.0.112:3333
   - Environments: .env.local
   - Experiments (use with caution):
     âœ“ ppr

 âœ“ Starting...
 âœ“ Compiled in 371ms
Langfuse tracing initialized
 âœ“ Ready in 1013ms
Langfuse tracing initialized
 â—‹ Compiling / ...
 âœ“ Compiled / in 4.7s
 GET / 200 in 5686ms
 â—‹ Compiling /api/history ...
 âœ“ Compiled /api/history in 793ms
 GET /api/history?limit=20 200 in 988ms
 GET /api/auth/session 200 in 1374ms
 GET /api/auth/session 200 in 22ms
 âœ“ Compiled /api/chat in 152ms
 â¨¯ ./app/(chat)/api/chat/route.ts:428:13
Parsing ecmascript source code failed
[0m [90m 426 |[39m               )[33m;[39m[0m
[0m [90m 427 |[39m             }[0m
[0m[31m[1m>[22m[39m[90m 428 |[39m           }[33m,[39m[33m,[39m[0m
[0m [90m     |[39m             [31m[1m^[22m[39m[0m
[0m [90m 429 |[39m           onFinish[33m:[39m [36masync[39m (result) [33m=>[39m {[0m
[0m [90m 430 |[39m             [90m// Final aggregated tracking[39m[0m
[0m [90m 431 |[39m             [36mconst[39m finalOutput [33m=[39m {[0m

Unexpected token `,`. Expected identifier, string literal, numeric literal or [ for the computed key


 âœ“ Compiled /_error in 345ms
 POST /api/chat 500 in 609ms
 â—‹ Compiling /chat/[id] ...
 âœ“ Compiled /chat/[id] in 2.9s
 GET /chat/5e30069f-717b-4bd3-bf29-886c211db5d2 200 in 3650ms
 GET /api/auth/session 200 in 43ms
 GET /api/history?limit=20 200 in 46ms
 GET /api/auth/session 200 in 25ms
 âœ“ Compiled /api/vote in 329ms
 GET /api/vote?chatId=5e30069f-717b-4bd3-bf29-886c211db5d2 200 in 359ms
 GET / 200 in 111ms
 GET /api/auth/session 200 in 106ms
 GET /api/history?limit=20 200 in 111ms
 GET /api/auth/session 200 in 23ms
[Database Tools] User context: {
  userId: '7c08fc98-a801-407a-98fc-f24b7e352bfb',
  orgId: '11111111-1111-1111-1111-111111111111',
  workspaceId: undefined,
  role: 'user'
}
[Database Tools] Loaded 5 tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Database Tools] Tools object: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[QueryMemory] Connected to Redis
[QueryMemory] Injected 2 examples into prompt
[Prompt Analysis]
- Characters: 6493
- Estimated tokens: 1623
- Cost (DeepSeek): $0.000227
- Sections: Full Schema, Invoice Context
[DeepSeek Detailed] Type: business, Tokens: 1813 (complete schema for accuracy)
[Model Selection] Using model: deepseek-chat
[Tools Registration] Available tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Tools Registration] Tool names for activeTools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
 GET /api/vote?chatId=1d63e791-c366-4f87-bbdb-b6ff6113de1b 200 in 22ms
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_FXCP22g2GPnxTMje7TtIn3OA' } ]
[QueryMemory] Failed to capture query: TypeError: output.includes is not a function
    at onStepFinish (app/(chat)/api/chat/route.ts:400:56)
  398 |                     
  399 |                     // Check if the query was successful (no error in output)
> 400 |                     const isSuccess = output && !output.includes('[Error') && !output.includes('Error:');
      |                                                        ^
  401 |                     
  402 |                     // Store if query was successful
  403 |                     if (isSuccess && query) {
[Step] Tool results received: 1
[DeepSeek] Intermediate step text: "Here are the first 3 invoices from your system:

| Invoice # | Issue Date | Due Date | Customer | To..."
 POST /api/chat 200 in 23046ms
 GET /api/history?limit=20 200 in 22ms
 GET / 200 in 118ms
 GET /api/auth/session 200 in 31ms
 GET /api/history?limit=20 200 in 34ms
 GET /api/auth/session 200 in 21ms
[Database Tools] User context: {
  userId: '7c08fc98-a801-407a-98fc-f24b7e352bfb',
  orgId: '11111111-1111-1111-1111-111111111111',
  workspaceId: undefined,
  role: 'user'
}
[Database Tools] Loaded 5 tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Database Tools] Tools object: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[QueryMemory] Connected to Redis
[Prompt Analysis]
- Characters: 6480
- Estimated tokens: 1620
- Cost (DeepSeek): $0.000227
- Sections: Full Schema
[DeepSeek Detailed] Type: business, Tokens: 1620 (complete schema for accuracy)
[Model Selection] Using model: deepseek-chat
[Tools Registration] Available tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Tools Registration] Tool names for activeTools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
 GET /api/vote?chatId=3b9ba573-14ac-4a14-91ae-8ec0434cc78f 200 in 30ms
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '330',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_4ka960D9Euo2BDccV3eTsnD1' } ]
[QueryMemory] Stored: query:finance:lookup (usage: 1)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '330',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_9Gmf918mOKu95WoXUXtrwjQu' } ]
[QueryMemory] Stored: query:finance:lookup (usage: 2)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'schemaInfo', id: 'call_00_csZRvkVFqcHbN8c0vhzop8SI' } ]
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '166',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_pj6I0V1WUSqYcGyKPKwniEtD' } ]
[QueryMemory] Stored: query:finance:lookup (usage: 3)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "LIMIT"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '37',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_c6dt4ClAf2LaQCiwRwtV2BKF' } ]
[QueryMemory] Stored: query:finance:lookup (usage: 4)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '30',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_xbcUmrkkfeU1fxWwGHPg2Yog' } ]
[QueryMemory] Stored: query:finance:lookup (usage: 5)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'viewsList', id: 'call_00_cxcH87OL8Gl9Po9o02V2oeSJ' } ]
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'viewsList', id: 'call_00_4viiy43FxK4d9sBTLcNhLZjx' } ]
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: relation "v_profit_loss_statement" does not exist] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42P01',
  position: '15',
  file: 'parse_relation.c',
  line: '1449',
  routine: 'parserOpenTable'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_6Mme6xjlW0A0I4UNduodiLHd' } ]
[QueryMemory] Stored: query:general:lookup (usage: 1)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: relation "v_customer_revenue" does not exist] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42P01',
  position: '15',
  file: 'parse_relation.c',
  line: '1449',
  routine: 'parserOpenTable'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_xgHhRlHsZ8h2xRM7dKXvsofs' } ]
[QueryMemory] Stored: query:general:lookup (usage: 2)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: relation "v_kpi_dashboard" does not exist] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42P01',
  position: '15',
  file: 'parse_relation.c',
  line: '1449',
  routine: 'parserOpenTable'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_XHigTYkopz9qHBCZ5oEyi5iG' } ]
[QueryMemory] Stored: query:general:lookup (usage: 3)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_B87n52IkjqKfYxYsSLQi5Dxg' } ]
[QueryMemory] Stored: query:general:lookup (usage: 4)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_g7EygMpB3dfl8yfuDAzkQeC2' } ]
[QueryMemory] Stored: query:finance:lookup (usage: 6)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "GROUP"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '190',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_BTBYpEsi3ZpoA0GLqnboyLbw' } ]
[QueryMemory] Stored: query:finance:lookup (usage: 7)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: column "invoices.status" must appear in the GROUP BY clause or be used in an aggregate function] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42803',
  position: '8',
  file: 'parse_agg.c',
  line: '1439',
  routine: 'check_ungrouped_columns_walker'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_4Y8JoUyq7EWlIY8P4dOSHnm7' } ]
[QueryMemory] Stored: query:finance:lookup (usage: 8)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_oVNVCcWxjWOWOZ4ji8FtFIb8' } ]
[QueryMemory] Stored: query:finance:lookup (usage: 9)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[DeepSeek] Intermediate step text: "## Total Revenue Summary

Based on the data, here's your revenue overview:

**Total Revenue:** \$1,0..."
 POST /api/chat 200 in 121389ms
 GET /api/history?limit=20 200 in 31ms
[Database Tools] User context: {
  userId: '7c08fc98-a801-407a-98fc-f24b7e352bfb',
  orgId: '11111111-1111-1111-1111-111111111111',
  workspaceId: undefined,
  role: 'user'
}
[Database Tools] Loaded 5 tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Database Tools] Tools object: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[QueryMemory] Injected 2 examples into prompt
[Prompt Analysis]
- Characters: 6493
- Estimated tokens: 1623
- Cost (DeepSeek): $0.000227
- Sections: Full Schema, Invoice Context
[DeepSeek Detailed] Type: business, Tokens: 1765 (complete schema for accuracy)
[Model Selection] Using model: deepseek-chat
[Tools Registration] Available tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Tools Registration] Tool names for activeTools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_d9iaeNvaFsSkPEKK6WPAXUo3' } ]
[QueryMemory] Stored: query:finance:lookup_invoice (usage: 2)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[DeepSeek] Intermediate step text: "## Your Invoices

Here are all your invoices:

| Invoice # | Issue Date | Due Date | Customer | Tota..."
 POST /api/chat 200 in 23426ms
 GET /api/history?limit=20 200 in 52ms
 GET / 200 in 146ms
 GET /api/auth/session 200 in 147ms
 GET /api/history?limit=20 200 in 155ms
 â—‹ Compiling /favicon.ico ...
 GET /api/auth/session 200 in 50ms
 âœ“ Compiled /favicon.ico in 546ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 773ms
 GET /api/auth/csrf 200 in 33ms
 POST /api/auth/signout 200 in 20ms
 âœ“ Compiled /api/auth/guest in 277ms
 GET /api/auth/guest?redirectUrl=http%3A%2F%2Flocalhost%3A3333%2F 307 in 381ms
 GET / 200 in 127ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 232ms
 GET /api/auth/session 200 in 41ms
 GET /api/history?limit=20 200 in 41ms
 GET /api/auth/session 200 in 27ms
 â—‹ Compiling /login ...
 âœ“ Compiled /login in 552ms
 GET /login 200 in 596ms
[31m[auth][error][0m CredentialsSignin: Read more at https://errors.authjs.dev#credentialssignin
    at callback (/Users/kalam/Codespace/omnizen-app/.next/server/chunks/ssr/c1962_@auth_core_2f58928a._.js:4011:30)
    at async AuthInternal (/Users/kalam/Codespace/omnizen-app/.next/server/chunks/ssr/c1962_@auth_core_2f58928a._.js:4860:24)
    at async Auth (/Users/kalam/Codespace/omnizen-app/.next/server/chunks/ssr/c1962_@auth_core_2f58928a._.js:5099:34)
    at async signIn (/Users/kalam/Codespace/omnizen-app/.next/server/chunks/ssr/node_modules__pnpm_5df8e29d._.js:5266:17)
    at async login (/Users/kalam/Codespace/omnizen-app/.next/server/chunks/ssr/[root-of-the-server]__33f3337b._.js:1662:9)
    at async /Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/compiled/next-server/app-page-experimental.runtime.dev.js:455:2357
    at async handleAction (/Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/compiled/next-server/app-page-experimental.runtime.dev.js:454:21403)
    at async renderToHTMLOrFlightImpl (/Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/compiled/next-server/app-page-experimental.runtime.dev.js:460:26888)
    at async doRender (/Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/server/base-server.js:1651:34)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/server/base-server.js:1916:28)
    at async DevServer.renderPageComponent (/Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/server/base-server.js:2394:24)
    at async DevServer.renderToResponseImpl (/Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/server/base-server.js:2431:32)
    at async DevServer.pipeImpl (/Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/server/base-server.js:1004:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/server/next-server.js:305:17)
    at async DevServer.handleRequestImpl (/Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/server/base-server.js:896:17)
    at async /Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/server/dev/next-dev-server.js:371:20
    at async Span.traceAsyncFn (/Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/trace/trace.js:157:20)
    at async DevServer.handleRequest (/Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/server/dev/next-dev-server.js:368:24)
    at async invokeRender (/Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/server/lib/router-server.js:235:21)
    at async handleRequest (/Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/server/lib/router-server.js:426:24)
    at async requestHandlerImpl (/Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/server/lib/router-server.js:450:13)
    at async Server.requestListener (/Users/kalam/Codespace/omnizen-app/node_modules/.pnpm/next@15.3.0-canary.31_@opentelemetry+api@1.9.0_@playwright+test@1.51.0_react-dom@19.0.0-rc-45_mlqzopqn56t6gad76627omqvii/node_modules/next/dist/server/lib/start-server.js:158:13)
 POST /login 200 in 95ms
 âœ“ Compiled /register in 463ms
 GET /register 200 in 494ms
Created Supabase auth user: f9f67aef-accd-4305-82be-8ffe0b1b2234
 POST /register 200 in 259ms
 GET /api/auth/session 200 in 33ms
 GET / 200 in 53ms
 GET / 200 in 70ms
 GET /api/auth/session 200 in 66ms
 GET /api/auth/session 200 in 59ms
[Database Tools] User context: {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  workspaceId: undefined,
  role: 'user'
}
[Database Tools] Loaded 5 tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Database Tools] Tools object: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[QueryMemory] Injected 1 examples into prompt
[Prompt Analysis]
- Characters: 6256
- Estimated tokens: 1564
- Cost (DeepSeek): $0.000219
- Sections: Full Schema
[DeepSeek Detailed] Type: business, Tokens: 1628 (complete schema for accuracy)
[Model Selection] Using model: deepseek-chat
[Tools Registration] Available tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Tools Registration] Tool names for activeTools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
 GET /api/vote?chatId=cc7f2305-18e6-4fb5-aad1-b10863c9de39 200 in 48ms
[Step] Tool calls: [ { name: 'schemaInfo', id: 'call_00_gGCKFb921fatccVDZUXAgW7s' } ]
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_pSDYOGfYlJdqcYILbjXDL9lm' } ]
[QueryMemory] Stored: query:general:query (usage: 1)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'schemaInfo', id: 'call_00_qknFdLrNZ62xPKGE0hExu42d' } ]
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_mJkw4fJsucIxlo93O0qFwORv' } ]
[QueryMemory] Stored: query:general:query (usage: 2)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_LLi7dknWLtOZwaardONr2Hh8' } ]
[QueryMemory] Stored: query:general:query (usage: 3)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_AqqtOMn62fG3RrLMAPVB3glO' } ]
[QueryMemory] Stored: query:contacts:query (usage: 1)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '54',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_USIP7SEo8dSN3uT891UpE5xw' } ]
[QueryMemory] Stored: query:inventory:query (usage: 1)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '54',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_5Z1Jv8KzIxvyU4NDLZl9AZob' } ]
[QueryMemory] Stored: query:inventory:query (usage: 2)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_wtZchSgRUlPUqMKpCVFpyZ2c' } ]
[QueryMemory] Stored: query:inventory:query (usage: 3)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_pB5IKjZKnk4Z6cObBzp7Cd53' } ]
[QueryMemory] Stored: query:contacts:query (usage: 2)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[DeepSeek] Intermediate step text: "Based on my analysis of your database, here's what I found and what information you'll need to provi..."
 POST /api/chat 200 in 95764ms
 GET /api/history?limit=20 200 in 39ms
 GET /api/auth/session 200 in 45ms
 GET /api/auth/session 200 in 31ms
 GET /api/history?limit=20 200 in 43ms
[Database Tools] User context: {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  workspaceId: undefined,
  role: 'user'
}
[Database Tools] Loaded 5 tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Database Tools] Tools object: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[QueryMemory] Injected 2 examples into prompt
[Prompt Analysis]
- Characters: 6256
- Estimated tokens: 1564
- Cost (DeepSeek): $0.000219
- Sections: Full Schema
[DeepSeek Detailed] Type: write, Tokens: 1689 (complete schema for accuracy)
[Model Selection] Using model: deepseek-chat
[Tools Registration] Available tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Tools Registration] Tool names for activeTools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[dbWrite] Error: [Error [PostgresError]: syntax error at or near "name"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '33',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Audit] {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  operation: 'UPDATE',
  query: "UPDATE organizations SET name = 'Anchorblock Technology Limited', country_code = 'BD', currency = 'USD', base_currency = 'USD' WHERE id = '11111111-1111-1111-1111-111111111111'",
  success: false,
  error: 'syntax error at or near "name"'
}
[Step] Tool calls: [ { name: 'dbWrite', id: 'call_00_rjeHlhZJ1x1Mz8axHrIvgaB9' } ]
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_Nb9uPO6Y7u7LoWcpJyU3VSLp' } ]
[QueryMemory] Stored: query:general:query (usage: 4)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbWrite] Error: [Error [PostgresError]: syntax error at or near "name"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '33',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Audit] {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  operation: 'UPDATE',
  query: "UPDATE organizations SET name = 'Anchorblock Technology Limited', country_code = 'BD', currency = 'USD', base_currency = 'USD' WHERE id = '11111111-1111-1111-1111-111111111111'",
  success: false,
  error: 'syntax error at or near "name"'
}
[Step] Tool calls: [ { name: 'dbWrite', id: 'call_00_I8RP5RNKdCKJG3VjNrVP4fjT' } ]
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_kPBJ3PLmylxgcvpL1FHtnqJJ' } ]
[QueryMemory] Stored: query:general:query (usage: 5)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbWrite] Error: [Error [PostgresError]: syntax error at or near "name"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '33',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Audit] {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  operation: 'UPDATE',
  query: "UPDATE organizations SET name = 'Anchorblock Technology Limited', country_code = 'BD' WHERE id = '11111111-1111-1111-1111-111111111111'",
  success: false,
  error: 'syntax error at or near "name"'
}
[Step] Tool calls: [ { name: 'dbWrite', id: 'call_00_QIpMljcT8Ro7fkM6EBADiutz' } ]
[Step] Tool results received: 1
[dbWrite] Error: [Error [PostgresError]: syntax error at or near "country_code"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '33',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Audit] {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  operation: 'UPDATE',
  query: "UPDATE organizations SET country_code = 'BD' WHERE id = '11111111-1111-1111-1111-111111111111'",
  success: false,
  error: 'syntax error at or near "country_code"'
}
[Step] Tool calls: [ { name: 'dbWrite', id: 'call_00_n0RYOMtpkYt94ctQgynwnk3z' } ]
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_yVgFY7AdyazRWNRWmSF1Ifyr' } ]
[QueryMemory] Stored: query:contacts:query (usage: 3)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbWrite] Error: [Error [PostgresError]: invalid input value for enum account_type: "revenue"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '22P02',
  position: '973',
  file: 'enum.c',
  line: '129',
  routine: 'enum_in'
}
[Audit] {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  operation: 'INSERT',
  query: 'INSERT INTO chart_accounts (id, organization_id, code, name, type, normal_balance, current_balance, is_active, currency_code) VALUES \n' +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '1010', 'Cash - USD', 'asset', 'debit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '1020', 'Cash - BDT', 'asset', 'debit', 0, true, 'BDT'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '1030', 'Bank Account - USD', 'asset', 'debit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '1040', 'Bank Account - BDT', 'asset', 'debit', 0, true, 'BDT'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '1200', 'Accounts Receivable', 'asset', 'debit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '2000', 'Accounts Payable', 'liability', 'credit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '4000', 'Software Development Revenue', 'revenue', 'credit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '4010', 'Consulting Revenue', 'revenue', 'credit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '5000', 'Salaries & Wages', 'expense', 'debit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '5010', 'Software Tools & Subscriptions', 'expense', 'debit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '5020', 'Office Rent', 'expense', 'debit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '5030', 'Internet & Utilities', 'expense', 'debit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '3000', 'Owner''s Equity', 'equity', 'credit', 0, true, 'USD')",
  success: false,
  error: 'invalid input value for enum account_type: "revenue"'
}
[Step] Tool calls: [ { name: 'dbWrite', id: 'call_00_utR4Kb9RDQWRlDHCjByMD7QF' } ]
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_HGDNc8uWrv9ubk49cjGBnKrs' } ]
[QueryMemory] Stored: query:general:query (usage: 6)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Audit] {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  operation: 'INSERT',
  query: 'INSERT INTO chart_accounts (id, organization_id, code, name, type, normal_balance, current_balance, is_active, currency_code) VALUES \n' +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '1010', 'Cash - USD', 'asset', 'debit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '1020', 'Cash - BDT', 'asset', 'debit', 0, true, 'BDT'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '1030', 'Bank Account - USD', 'asset', 'debit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '1040', 'Bank Account - BDT', 'asset', 'debit', 0, true, 'BDT'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '1200', 'Accounts Receivable', 'asset', 'debit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '2000', 'Accounts Payable', 'liability', 'credit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '4000', 'Software Development Revenue', 'income', 'credit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '4010', 'Consulting Revenue', 'income', 'credit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '5000', 'Salaries & Wages', 'expense', 'debit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '5010', 'Software Tools & Subscriptions', 'expense', 'debit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '5020', 'Office Rent', 'expense', 'debit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '5030', 'Internet & Utilities', 'expense', 'debit', 0, true, 'USD'),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '3000', 'Owner''s Equity', 'equity', 'credit', 0, true, 'USD')",
  success: true,
  executionTime: 10
}
[Step] Tool calls: [ { name: 'dbWrite', id: 'call_00_aggEB1IX3KoCTMwN9TOLncvg' } ]
[Step] Tool results received: 1
[Audit] {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  operation: 'INSERT',
  query: 'INSERT INTO contacts (id, organization_id, type, company_name, display_name, email, phone, address_line1, city, state, postal_code, country, currency_code, payment_terms, is_active) VALUES \n' +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', 'vendor', 'Anchorblock Technology Limited', 'Anchorblock Technology', 'info@anchorblock.tech', '+880-XXXX-XXXXXX', 'House 432, Road 6, Avenue 5, Mirpur Dohs', 'Dhaka', null, '1216', 'Bangladesh', 'USD', 30, true),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', 'customer', 'bKash Limited', 'bKash', 'corporate@bkash.com', '+880-XXXX-XXXXXX', 'bKash Tower, Plot SE(C)-3, Gulshan Avenue', 'Dhaka', null, '1212', 'Bangladesh', 'USD', 30, true)",
  success: true,
  executionTime: 6
}
[Step] Tool calls: [ { name: 'dbWrite', id: 'call_00_GlVLb9NRlDNVbAajzigoUDGq' } ]
[Step] Tool results received: 1
[Audit] {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  operation: 'INSERT',
  query: 'INSERT INTO products (id, organization_id, sku, name, description, is_service, sale_price, purchase_price, currency_code, is_taxable, is_active) VALUES \n' +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', 'DEV-HR', 'Hourly Development Rate', 'Custom software development services per hour', true, 75.00, 0, 'USD', false, true),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', 'DEV-PJ', 'Project-Based Development', 'Complete software project delivery', true, 5000.00, 0, 'USD', false, true),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', 'CON-HR', 'Consulting Hourly Rate', 'Technical consulting and advisory services', true, 100.00, 0, 'USD', false, true),\n" +
    "(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', 'MAINT-M', 'Monthly Maintenance', 'Ongoing support and maintenance services', true, 500.00, 0, 'USD', false, true)",
  success: true,
  executionTime: 6
}
[Step] Tool calls: [ { name: 'dbWrite', id: 'call_00_iAQdgUJu2RUmddrXowUYBOG2' } ]
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_znsU92nyzGy9x8gpwiQ5bGye' } ]
[QueryMemory] Stored: query:general:query (usage: 7)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_YPIGMo7huoeA0qskB7rAs7KE' } ]
[QueryMemory] Stored: query:contacts:query (usage: 4)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '78',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_ZvLV6B2wmIAJhOZzrMDSlCjH' } ]
[QueryMemory] Stored: query:inventory:query (usage: 4)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_9w8mNhE186xUgqZ0A9lrplVu' } ]
[QueryMemory] Stored: query:inventory:query (usage: 5)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[DeepSeek] Intermediate step text: "Perfect! I've successfully set up your company's basic bookkeeping structure. Here's what has been c..."
 POST /api/chat 200 in 229199ms
 GET /api/history?limit=20 200 in 54ms
 GET /api/auth/session 200 in 92ms
 GET /api/auth/session 200 in 38ms
[Database Tools] User context: {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  workspaceId: undefined,
  role: 'user'
}
[Database Tools] Loaded 5 tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Database Tools] Tools object: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[QueryMemory] Injected 2 examples into prompt
[Prompt Analysis]
- Characters: 6256
- Estimated tokens: 1564
- Cost (DeepSeek): $0.000219
- Sections: Full Schema
[DeepSeek Detailed] Type: business, Tokens: 1781 (complete schema for accuracy)
[Model Selection] Using model: deepseek-chat
[Tools Registration] Available tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Tools Registration] Tool names for activeTools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_ejzrYTaKTG7RNIZL7XNmugp3' } ]
[QueryMemory] Stored: query:general:lookup (usage: 5)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[DeepSeek] Intermediate step text: "# ðŸ“Š Anchorblock Technology Limited - Chart of Accounts

## ðŸ’° **Assets** (Account Codes 1000-1999)
..."
 POST /api/chat 200 in 42566ms
 GET /api/history?limit=20 200 in 46ms
 GET /api/auth/session 200 in 44ms
 GET /api/auth/session 200 in 33ms
 GET /api/auth/session 200 in 38ms
 GET /api/auth/session 200 in 30ms
 GET /api/auth/session 200 in 45ms
 GET /api/auth/session 200 in 30ms
 GET /api/auth/session 200 in 51ms
 GET /api/auth/session 200 in 29ms
 âœ“ Compiled in 106ms
 GET /api/auth/session 200 in 38ms
 GET /api/auth/session 200 in 31ms
 GET / 200 in 388ms
 GET /api/history?limit=20 200 in 42ms
 GET /api/auth/session 200 in 27ms
 GET /api/auth/session 200 in 22ms
 âœ“ Compiled in 74ms
 GET /api/auth/session 200 in 47ms
 GET /api/auth/session 200 in 54ms
 GET / 200 in 1009ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 223ms
 GET /api/auth/session 200 in 90ms
 GET /api/history?limit=20 200 in 98ms
 GET /api/auth/session 200 in 42ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 271ms
 GET / 200 in 124ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 219ms
 GET /api/auth/session 200 in 50ms
 GET /api/history?limit=20 200 in 56ms
 GET /api/auth/session 200 in 38ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 243ms
 âœ“ Compiled in 77ms
 GET /api/auth/session 200 in 49ms
 GET /api/auth/session 200 in 30ms
 âœ“ Compiled in 75ms
 GET /api/auth/session 200 in 47ms
 GET /api/auth/session 200 in 41ms
 âœ“ Compiled in 72ms
 GET /api/auth/session 200 in 53ms
 GET /api/auth/session 200 in 40ms
 GET / 200 in 1056ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 240ms
 GET /api/auth/session 200 in 80ms
 GET /api/history?limit=20 200 in 93ms
 GET /api/auth/session 200 in 32ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 245ms
[Database Tools] User context: {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  workspaceId: undefined,
  role: 'user'
}
[Database Tools] Loaded 5 tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Database Tools] Tools object: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[QueryMemory] Connected to Redis
[QueryMemory] Injected 2 examples into prompt
[Prompt Analysis]
- Characters: 7073
- Estimated tokens: 1768
- Cost (DeepSeek): $0.000248
- Sections: Full Schema
[DeepSeek Detailed] Type: business, Tokens: 2009 (complete schema for accuracy)
[Model Selection] Using model: deepseek-chat
[Tools Registration] Available tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Tools Registration] Tool names for activeTools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
 GET /api/vote?chatId=d3e8136d-969f-4bb9-80ae-bcad0a5302a9 200 in 39ms
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_Hfmpufi6vKygYY7FW2TY6tUx' } ]
[QueryMemory] Stored: query:general:lookup (usage: 6)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[DeepSeek] Intermediate step text: "Here is your chart of accounts:

| Code | Account Name | Type | Currency | Current Balance | Active ..."
 POST /api/chat 200 in 31850ms
 GET /api/history?limit=20 200 in 49ms
 GET /api/auth/session 200 in 44ms
 GET /api/auth/session 200 in 41ms
[Database Tools] User context: {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  workspaceId: undefined,
  role: 'user'
}
[Database Tools] Loaded 5 tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Database Tools] Tools object: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[QueryMemory] Injected 2 examples into prompt
[Prompt Analysis]
- Characters: 7073
- Estimated tokens: 1768
- Cost (DeepSeek): $0.000248
- Sections: Full Schema
[DeepSeek Detailed] Type: business, Tokens: 2008 (complete schema for accuracy)
[Model Selection] Using model: deepseek-chat
[Tools Registration] Available tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Tools Registration] Tool names for activeTools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Step] Tool calls: [ { name: 'schemaInfo', id: 'call_00_m3ZP7c30X6sBWCEICuA9wZh8' } ]
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_q9R9ErfX2vnMnXRrXbJNdUNL' } ]
[QueryMemory] Stored: query:contacts:query (usage: 5)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '46',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_7R3nShO0VJVr3GWE0xEw3fsY' } ]
[QueryMemory] Stored: query:inventory:query (usage: 6)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '46',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_dDhgCKhZJ3kVHg9S2R1XxDMu' } ]
[QueryMemory] Stored: query:inventory:query (usage: 7)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '37',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_8hF5lBdoMxIAekBvoAuFHC6C' } ]
[QueryMemory] Stored: query:inventory:query (usage: 8)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '37',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_kFeKHh23Tkkob10fVQXrWJmA' } ]
[QueryMemory] Stored: query:inventory:query (usage: 9)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_2fkoGzPyLwNLEHm88wA117dc' } ]
[QueryMemory] Stored: query:inventory:query (usage: 10)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '39',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_7C2Az9d1h2EGJSkHqWJY9fuv' } ]
[QueryMemory] Stored: query:inventory:query (usage: 11)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_OVjxWpsxiPstXuKmEYWHtehO' } ]
[QueryMemory] Stored: query:inventory:query (usage: 12)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
 GET /api/auth/session 200 in 55ms
 GET /api/auth/session 200 in 45ms
[DeepSeek] Intermediate step text: "To set up your books completely, I need the following information:

## Essential Setup Requirements:..."
 POST /api/chat 200 in 76251ms
 GET /api/history?limit=20 200 in 51ms
[Database Tools] User context: {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  workspaceId: undefined,
  role: 'user'
}
[Database Tools] Loaded 5 tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Database Tools] Tools object: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[QueryMemory] Injected 2 examples into prompt
[Prompt Analysis]
- Characters: 7073
- Estimated tokens: 1768
- Cost (DeepSeek): $0.000248
- Sections: Full Schema
[DeepSeek Detailed] Type: business, Tokens: 2008 (complete schema for accuracy)
[Model Selection] Using model: deepseek-chat
[Tools Registration] Available tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Tools Registration] Tool names for activeTools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_wa0Le4evDfApTPoHMKqToBjG' } ]
[QueryMemory] Stored: query:general:lookup (usage: 7)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '100',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_5cPSXQLbvlVm3qRNDLoWqo7A' } ]
[QueryMemory] Stored: query:inventory:lookup (usage: 1)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_G7uOsowSbIhzSu5nLVTKfEIN' } ]
[QueryMemory] Stored: query:inventory:lookup (usage: 2)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[DeepSeek] Intermediate step text: "Here are service offering templates for your tech development business:

## Service Offering Templat..."
 POST /api/chat 200 in 52750ms
 GET /api/history?limit=20 200 in 38ms
 GET /api/auth/session 200 in 54ms
 GET /api/auth/session 200 in 37ms
 GET /api/auth/session 200 in 55ms
 GET /api/auth/session 200 in 37ms
 GET /api/auth/session 200 in 56ms
 GET /api/auth/session 200 in 61ms
 GET / 200 in 64ms
 GET /api/history?limit=20 200 in 37ms
[Database Tools] User context: {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  workspaceId: undefined,
  role: 'user'
}
[Database Tools] Loaded 5 tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Database Tools] Tools object: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[QueryMemory] Connected to Redis
[Prompt Analysis]
- Characters: 7073
- Estimated tokens: 1768
- Cost (DeepSeek): $0.000248
- Sections: Full Schema
[DeepSeek Detailed] Type: business, Tokens: 1769 (complete schema for accuracy)
[Model Selection] Using model: deepseek-chat
[Tools Registration] Available tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Tools Registration] Tool names for activeTools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
 GET /api/vote?chatId=79df584b-3bcd-443b-b7a4-6408b6128f35 200 in 34ms
[Step] Tool calls: [ { name: 'schemaInfo', id: 'call_00_8ZzF8OOFRLpMBvZBKu75kKy9' } ]
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_0rGAL1VrkXGNS3Y0IWbPiUZW' } ]
[QueryMemory] Stored: query:general:query (usage: 1)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_wZXCJpLOusJralLpTx22E6i9' } ]
[QueryMemory] Stored: query:general:query (usage: 2)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: missing FROM-clause entry for table "invoices"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42P01',
  position: '83',
  file: 'parse_relation.c',
  line: '3651',
  routine: 'errorMissingRTE'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_jV2K4p3ztLbkGCBzJisTT4dL' } ]
[QueryMemory] Stored: query:general:query (usage: 3)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '91',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_oTUCZ61AJUDZmgsFSNv4iutL' } ]
[QueryMemory] Stored: query:finance:query (usage: 1)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_Lee5Wnm4ETEAWkEnF0zSMDcH' } ]
[QueryMemory] Stored: query:general:query (usage: 4)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_Gw1IaI3RSDvfthp7Bno3Nhha' } ]
[QueryMemory] Stored: query:contacts:query (usage: 1)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '79',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_oUiO3IAXXm0tuyx0YoDCkBB2' } ]
[QueryMemory] Stored: query:inventory:query (usage: 1)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '53',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_ctRGrlyz2ICUUrjuSjcCWMne' } ]
[QueryMemory] Stored: query:inventory:query (usage: 2)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_6We4ijy02gH0Mtnymcebc99v' } ]
[QueryMemory] Stored: query:inventory:query (usage: 3)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_APjPHQlKpL4sUuu2acxhsxgV' } ]
[QueryMemory] Stored: query:finance:query (usage: 2)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_maDmZHa3QAvvZZ4j2Ha1nUl5' } ]
[QueryMemory] Stored: query:finance:query (usage: 3)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
 GET /api/auth/session 200 in 46ms
 GET /api/auth/session 200 in 35ms
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_W8W2yLJDOr0ynAhSawjxAVdm' } ]
[QueryMemory] Stored: query:finance:query (usage: 4)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: column "account_code" does not exist] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42703',
  position: '8',
  file: 'parse_relation.c',
  line: '3716',
  routine: 'errorMissingColumn'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_4ZaECjFVQtU76M1gI2JVpQ1R' } ]
[QueryMemory] Stored: query:general:query (usage: 5)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'schemaInfo', id: 'call_00_faTQJnWg127s6tqUm2lOlTA8' } ]
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_hOWCWAGjap1q2EQF6TPREGSv' } ]
[QueryMemory] Stored: query:general:query (usage: 6)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_qYPyOQmDgpyxO2z0kViTyyM2' } ]
[QueryMemory] Stored: query:contacts:query (usage: 2)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '68',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_fW06Wc1xxdOe1nUz1ppB6hHE' } ]
[QueryMemory] Stored: query:inventory:query (usage: 4)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_jROI3mebWtWGK8fPSyRIarb0' } ]
[QueryMemory] Stored: query:inventory:query (usage: 5)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
 GET /api/auth/session 200 in 48ms
 GET /api/auth/session 200 in 30ms
[DeepSeek] Intermediate step text: "Based on my analysis of your database setup, here's what I found and what you need to complete your ..."
 POST /api/chat 200 in 149667ms
 GET /api/history?limit=20 200 in 34ms
 GET /api/auth/session 200 in 44ms
 GET /api/auth/session 200 in 32ms
 GET /api/auth/session 200 in 50ms
 GET /api/auth/session 200 in 37ms
 GET /api/auth/session 200 in 49ms
 GET /api/auth/session 200 in 39ms
 GET /chat/79df584b-3bcd-443b-b7a4-6408b6128f35 200 in 201ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 233ms
 GET /api/auth/session 200 in 133ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 224ms
 GET /api/vote?chatId=79df584b-3bcd-443b-b7a4-6408b6128f35 200 in 163ms
 GET /api/history?limit=20 200 in 179ms
 GET /api/auth/session 200 in 38ms
 GET /chat/79df584b-3bcd-443b-b7a4-6408b6128f35 200 in 180ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 234ms
 GET /api/history?limit=20 200 in 85ms
 GET /api/auth/session 200 in 85ms
 GET /api/vote?chatId=79df584b-3bcd-443b-b7a4-6408b6128f35 200 in 85ms
 GET /api/auth/session 200 in 27ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 230ms
 GET /api/auth/session 200 in 31ms
 GET /api/auth/session 200 in 27ms
 GET /api/auth/session 200 in 27ms
 GET /api/auth/session 200 in 23ms
 GET /api/auth/session 200 in 35ms
 GET /api/auth/session 200 in 25ms
 GET /chat/79df584b-3bcd-443b-b7a4-6408b6128f35 200 in 172ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 297ms
 GET /api/history?limit=20 200 in 89ms
 GET /api/auth/session 200 in 90ms
 GET /api/vote?chatId=79df584b-3bcd-443b-b7a4-6408b6128f35 200 in 93ms
 GET /api/auth/session 200 in 32ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 251ms
 GET / 200 in 146ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 225ms
 GET /api/history?limit=20 200 in 46ms
 GET /api/auth/session 200 in 39ms
 GET /api/auth/session 200 in 37ms
 GET /api/auth/session 200 in 28ms
 GET /api/auth/session 200 in 25ms
 âœ“ Compiled in 127ms
 GET /api/auth/session 200 in 40ms
 GET /api/auth/session 200 in 25ms
 GET /api/auth/session 200 in 41ms
 GET /api/auth/session 200 in 32ms
 GET / 200 in 1019ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 232ms
 GET /api/auth/session 200 in 31ms
 GET /api/history?limit=20 200 in 27ms
 âœ“ Compiled in 73ms
 GET /api/auth/session 200 in 44ms
 GET /api/auth/session 200 in 34ms
 âœ“ Compiled in 68ms
 GET /api/auth/session 200 in 38ms
 GET /api/auth/session 200 in 61ms
 GET / 200 in 1028ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 225ms
 GET /api/history?limit=20 200 in 63ms
 GET /api/auth/session 200 in 64ms
 GET /api/auth/session 200 in 26ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 229ms
 GET / 200 in 111ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 225ms
 GET /api/history?limit=20 200 in 57ms
 GET /api/auth/session 200 in 58ms
 GET /api/auth/session 200 in 23ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 220ms
 GET /api/auth/session 200 in 52ms
 GET /api/auth/session 200 in 29ms
 GET / 200 in 128ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 230ms
 GET /api/history?limit=20 200 in 50ms
 GET /api/auth/session 200 in 52ms
 GET /api/auth/session 200 in 36ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 225ms
 GET / 200 in 127ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 222ms
 GET /api/auth/session 200 in 48ms
 GET /api/history?limit=20 200 in 53ms
 GET /api/auth/session 200 in 39ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 248ms
 GET / 200 in 129ms
 GET /api/history?limit=20 200 in 46ms
 GET /api/auth/session 200 in 46ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 236ms
 GET /api/auth/session 200 in 28ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 235ms
[Database Tools] User context: {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  workspaceId: undefined,
  role: 'user'
}
[Database Tools] Loaded 5 tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Database Tools] Tools object: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[QueryMemory] Injected 1 examples into prompt
[Prompt Analysis]
- Characters: 7310
- Estimated tokens: 1828
- Cost (DeepSeek): $0.000256
- Sections: Full Schema, Invoice Context
[DeepSeek Detailed] Type: write, Tokens: 1892 (complete schema for accuracy)
[Model Selection] Using model: deepseek-chat
[Tools Registration] Available tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Tools Registration] Tool names for activeTools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
 GET /api/vote?chatId=85d1589a-0ada-450e-9c70-0ad3ca8ed31a 200 in 48ms
[dbRead] Error: [Error [PostgresError]: invalid input syntax for type uuid: "org_123"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '22P02',
  position: '90',
  file: 'uuid.c',
  line: '138',
  routine: 'string_to_uuid'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_S2BHX7LWFsv442icGTUNTFlj' } ]
[QueryMemory] Stored: query:contacts:query_invoice (usage: 1)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_fSsnPFGWVgIJZ2v0LWUkh5pk' } ]
[QueryMemory] Stored: query:contacts:query_invoice (usage: 2)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_HIJAvPX47Cy7cd7m7uRd5zYQ' } ]
[QueryMemory] Stored: query:contacts:query_invoice (usage: 3)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_Xbrrr6nJvjGM4icLOmxLM4SH' } ]
[QueryMemory] Stored: query:contacts:query_invoice (usage: 4)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '64',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_ik4DIMWdvYGBkVcq7uU8wSEV' } ]
[QueryMemory] Stored: query:finance:query_invoice (usage: 1)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '64',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_Mj8d3kEUqKNHRXrJULaTOmFa' } ]
[QueryMemory] Stored: query:finance:query_invoice (usage: 2)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '43',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_G7Dgdfkpz4s8mJSzYoSUOkkS' } ]
[QueryMemory] Stored: query:finance:query_invoice (usage: 3)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'schemaInfo', id: 'call_00_yjL98jPrd46eWxYH8whGBUTV' } ]
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '43',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_DzWyMaZsCx6LRhs2CxmiLCqa' } ]
[QueryMemory] Stored: query:finance:query_invoice (usage: 4)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[explainQuery] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '51',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'explainQuery', id: 'call_00_hX736rKsPHzen1gPWEgJbMav' } ]
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "ORDER"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '43',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_NsWV7GitXbpVQH5SDQ7p6Us3' } ]
[QueryMemory] Stored: query:finance:query_invoice (usage: 5)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_AcQgNjwTAspfcUHnJgK1hkEy' } ]
[QueryMemory] Stored: query:finance:query_invoice (usage: 6)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Audit] {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  operation: 'INSERT',
  query: "INSERT INTO invoices (organization_id, invoice_number, customer_id, issue_date, due_date, subtotal, tax_amount, total_amount, balance_due, status, notes) VALUES ('11111111-1111-1111-1111-111111111111', 'INV-002', 'ee1bbb76-02ee-4999-a74f-d6470df29425', CURRENT_DATE, '2025-09-21', 200000, 0, 200000, 200000, 'draft', 'USSD App Support')",
  success: true,
  executionTime: 4
}
[Step] Tool calls: [ { name: 'dbWrite', id: 'call_00_wVPHtjy40L1OPkVq5HQt8KgK' } ]
[Step] Tool results received: 1
 âœ“ Compiled in 78ms
 GET /api/auth/session 200 in 45ms
 GET /api/auth/session 200 in 38ms
 POST /api/chat 200 in 98448ms
 GET /chat/85d1589a-0ada-450e-9c70-0ad3ca8ed31a 200 in 915ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 220ms
 GET /api/auth/session 200 in 49ms
 GET /api/history?limit=20 200 in 52ms
 GET /api/auth/session 200 in 34ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 228ms
 â—‹ Compiling /api/chat/[id]/stream ...
 âœ“ Compiled /api/chat/[id]/stream in 628ms
 GET /api/vote?chatId=85d1589a-0ada-450e-9c70-0ad3ca8ed31a 200 in 37ms
 GET /api/chat/85d1589a-0ada-450e-9c70-0ad3ca8ed31a/stream 200 in 2812ms
 GET /chat/85d1589a-0ada-450e-9c70-0ad3ca8ed31a 200 in 145ms
TypeError: Invalid state: Controller is already closed
    at <unknown> (../src/index.ts:295:29)
    at #emitPubSubMessage (../../../lib/client/pub-sub.ts:406:6)
    at PubSub.handleMessageReply (../../../lib/client/pub-sub.ts:350:8)
    at #onPush (../../../lib/client/commands-queue.ts:80:21)
    at decoder.onReply (../../../lib/client/commands-queue.ts:183:25)
    at #handleDecodedValue (../../../lib/RESP/decoder.ts:215:4)
    at #decodeTypeValue (../../../lib/RESP/decoder.ts:182:10)
    at Decoder.write (../../../lib/RESP/decoder.ts:90:32)
    at RedisSocket.<anonymous> (../../../lib/client/index.ts:560:30)
    at Socket.<anonymous> (../../../lib/client/socket.ts:256:31) {
  code: 'ERR_INVALID_STATE'
}
 GET /favicon.ico?favicon.46d6a819.ico 200 in 257ms
 GET /api/auth/session 200 in 73ms
 GET /api/history?limit=20 200 in 90ms
 GET /api/auth/session 200 in 45ms
 GET /api/vote?chatId=85d1589a-0ada-450e-9c70-0ad3ca8ed31a 200 in 28ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 268ms
[DeepSeek] Intermediate step text: "Invoice has been created successfully for bKash:

- **Invoice Number**: INV-002
- **Customer**: bKas..."
 GET /api/chat/85d1589a-0ada-450e-9c70-0ad3ca8ed31a/stream 200 in 761ms
 GET /api/history?limit=20 200 in 34ms
 GET /api/auth/session 200 in 81ms
 GET /api/auth/session 200 in 90ms
 GET /api/auth/session 200 in 46ms
 GET /api/auth/session 200 in 29ms
 GET /api/auth/session 200 in 37ms
 GET /api/auth/session 200 in 33ms
 GET /chat/85d1589a-0ada-450e-9c70-0ad3ca8ed31a 200 in 158ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 223ms
 GET /api/auth/session 200 in 74ms
 GET /api/history?limit=20 200 in 81ms
 GET /api/vote?chatId=85d1589a-0ada-450e-9c70-0ad3ca8ed31a 200 in 80ms
 GET /api/auth/session 200 in 35ms
 GET /favicon.ico?favicon.46d6a819.ico 200 in 260ms
 GET /api/auth/session 200 in 54ms
 GET /api/auth/session 200 in 35ms
[Database Tools] User context: {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  workspaceId: undefined,
  role: 'user'
}
[Database Tools] Loaded 5 tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Database Tools] Tools object: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[QueryMemory] Injected 2 examples into prompt
[Prompt Analysis]
- Characters: 7310
- Estimated tokens: 1828
- Cost (DeepSeek): $0.000256
- Sections: Full Schema, Invoice Context
[DeepSeek Detailed] Type: business, Tokens: 1942 (complete schema for accuracy)
[Model Selection] Using model: deepseek-chat
[Tools Registration] Available tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Tools Registration] Tool names for activeTools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_pX1dYD5CDEh8JoRLF5SoQc2L' } ]
[QueryMemory] Stored: query:finance:lookup_invoice (usage: 1)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[DeepSeek] Intermediate step text: "Here is your invoice list:

| Invoice # | Issue Date | Due Date | Customer | Total Amount | Paid | B..."
 POST /api/chat 200 in 21704ms
 GET /api/history?limit=20 200 in 42ms
 âœ“ Compiled in 105ms
 GET /api/auth/session 200 in 42ms
 GET /api/auth/session 200 in 28ms
 âœ“ Compiled in 84ms
 GET /api/auth/session 200 in 59ms
 GET /api/auth/session 200 in 38ms
[Database Tools] User context: {
  userId: '894e4c8e-2c62-4bc6-9cc4-4d6c9d290e60',
  orgId: '11111111-1111-1111-1111-111111111111',
  workspaceId: undefined,
  role: 'user'
}
[Database Tools] Loaded 5 tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Database Tools] Tools object: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[QueryMemory] Injected 1 examples into prompt
[Prompt Analysis]
- Characters: 7073
- Estimated tokens: 1768
- Cost (DeepSeek): $0.000248
- Sections: Full Schema
[DeepSeek Detailed] Type: write, Tokens: 1855 (complete schema for accuracy)
[Model Selection] Using model: deepseek-chat
[Tools Registration] Available tools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Tools Registration] Tool names for activeTools: [ 'dbRead', 'dbWrite', 'schemaInfo', 'viewsList', 'explainQuery' ]
[Step] Tool calls: [ { name: 'schemaInfo', id: 'call_00_FBb3B9sLs9Z8va4w3H3T09Kp' } ]
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '45',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_xpUuMuWxDun0FSltLy6FOKj2' } ]
[QueryMemory] Stored: query:finance:query (usage: 5)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[dbRead] Error: [Error [PostgresError]: syntax error at or near "WHERE"] {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42601',
  position: '65',
  file: 'scan.l',
  line: '1244',
  routine: 'scanner_yyerror'
}
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_pB1tt9G5m3c9OxqR6d3FZ9aA' } ]
[QueryMemory] Stored: query:finance:query (usage: 6)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_WNW0gXHhw0AlAgxms5GY4itN' } ]
[QueryMemory] Stored: query:finance:query (usage: 7)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[Step] Tool calls: [ { name: 'dbRead', id: 'call_00_Pu73xAYmBAkGNcIrLGvDxR2p' } ]
[QueryMemory] Stored: query:finance:query (usage: 8)
[QueryMemory] Stored successful query
[Step] Tool results received: 1
[DeepSeek] Intermediate step text: "No, journal entries have not been created for these invoices yet. The invoices are currently in draf..."
 POST /api/chat 200 in 47452ms
 GET /api/history?limit=20 200 in 50ms
